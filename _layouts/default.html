<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>{{ page.title | default: site.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
		<link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>


    <script>
		var parser=function(){var r={};r.fromSrt=function(r,e){var n=e?!0:!1;r=r.replace(/\r/g,"");var i=/(\d+)\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})/g;r=r.split(i),r.shift();for(var a=[],d=0;d<r.length;d+=4)a.push({id:r[d].trim(),startTime:n?t(r[d+1].trim()):r[d+1].trim(),endTime:n?t(r[d+2].trim()):r[d+2].trim(),text:r[d+3].trim()});return a},r.toSrt=function(r){if(!r instanceof Array)return"";for(var t="",n=0;n<r.length;n++){var i=r[n];isNaN(i.startTime)||isNaN(i.endTime)||(i.startTime=e(parseInt(i.startTime,10)),i.endTime=e(parseInt(i.endTime,10))),t+=i.id+"\r\n",t+=i.startTime+" --> "+i.endTime+"\r\n",t+=i.text.replace("\n","\r\n")+"\r\n\r\n"}return t};var t=function(r){var t=/(\d+):(\d{2}):(\d{2}),(\d{3})/,e=t.exec(r);if(null===e)return 0;for(var n=1;5>n;n++)e[n]=parseInt(e[n],10),isNaN(e[n])&&(e[n]=0);return 36e5*e[1]+6e4*e[2]+1e3*e[3]+e[4]},e=function(r){var t=[36e5,6e4,1e3],e=[];for(var n in t){var i=(r/t[n]>>0).toString();i.length<2&&(i="0"+i),r%=t[n],e.push(i)}var a=r.toString();if(a.length<3)for(n=0;n<=3-a.length;n++)a="0"+a;return e.join(":")+","+a};return r}();"object"==typeof exports&&(module.exports=parser);
    </script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
    </script>
    <script>
      $(document).ready(function() {
        $('#inputForm').submit(function(event) {
          event.preventDefault()
          $('#outputFile').slideDown();
        });
      });
    </script>
  </head>
  <body>
    <div class="container">
      <div class="header">
      <h1 class="project-name">{{ site.title | default: site.github.repository_name }}</h1>
      <h2 class="project-tagline">{{ site.description | default: site.github.project_tagline }}</h2>
      {% if site.github.is_project_page %}
        <a href="{{ site.github.repository_url }}" class="btn">View on GitHub</a>
      {% endif %}
      {% if site.show_downloads %}
        <a href="{{ site.github.zip_url }}" class="btn">Download .zip</a>
        <a href="{{ site.github.tar_url }}" class="btn">Download .tar.gz</a>
      {% endif %}
      </div>
      <div class="row">
        <div class ="col-6-md">
          <div class="card">
            <div class="card-block">
              <h4 class="card-title cardText">Convert your srt:</h4>
        			<form id = "inputForm" class = "cardText">
                <input type="file" id="files" name="files[]" accept=".srt" multiple>
            		<input type="submit">
        			</form>
            </div><!--end card-block-->
          </div><!--end card-->
        </div><!--End Column 6 -->
        <div class = "col-6-md" id = "outputFile">
          <div class="card">
            <div class="card-block">
              <h4 class="card-title cardText">Converted:</h4>
              <p class="card-text cardText"><output id="list"></output></p>
            </div><!--End card-block-->
          </div><!--End card-->
        </div><!-- End Second Column 6 -->
      </div><!--End Row-->
      <br>
      <hr>
      <footer class="site-footer header">
        {% if site.github.is_project_page %}
        <span class="site-footer-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span>
        {% endif %}
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
        </footer>
      </div><!--End Container-->
      <script>
      function handleFileSelect(evt) {
        var files = evt.target.files; // FileList object

        // files is a FileList of File objects. List some properties.
        var output = [];
        for (var i = 0, f; f = files[i]; i++) {
          var reader = new FileReader();
          reader.onload = (function(theFile) {
          return function(e) {

            var x = parser.fromSrt(e.target.result);
            for (y = 0; y < x.length; y ++) {
              output.push(x[y].text + "\n");
              document.getElementById('list').innerHTML = '<ul>' + output.join('</ul><ul>') + '</ul>';
            }
          };
        })(f);

          reader.readAsText(f);
        }
      }

      document.getElementById('files').addEventListener('change', handleFileSelect, false);
    </script>
  </body>
</html>
